var app=angular.module("Fusball",["ngRoute"]);app.config(["$routeProvider","$httpProvider",function(a,b){b.defaults.useXDomain=!0,delete b.defaults.headers.common["X-Requested-With"],a.when("/",{templateUrl:"templates/home.html",controller:"HomeController"}).when("/users",{templateUrl:"templates/users.html",controller:"UserController"}).otherwise({redirectTo:"/"})}]),app.factory("PlayersService",[function(){var a,b,c,d,e;return{setPlayer11:function(b){a=b},setPlayer12:function(a){b=a},setPlayer21:function(a){c=a},setPlayer22:function(a){d=a},setCurrent:function(a){e=a},getPlayer11:function(){return a},getPlayer12:function(){return b},getPlayer21:function(){return c},getPlayer22:function(){return d},getCurrent:function(){return e}}}]),app.factory("SocketService",["$http",function(){var a;return{setConnected:function(b){a=b},getSocket:function(){return a}}}]),app.controller("HomeController",["$scope","$location","SocketService","PlayersService",function(a,b,c,d){var e=io.connect("10.42.104.61:3000/");e.emit("getScore"),a.player11="Player 1",a.player12="Player 2",a.player21="Player 1",a.player22="Player 2",d.getPlayer11()&&(a.player11=d.getPlayer11().Name,d.setCurrent(null)),d.getPlayer12()&&(a.player12=d.getPlayer12().Name,d.setCurrent(null)),d.getPlayer21()&&(a.player21=d.getPlayer21().Name,d.setCurrent(null)),d.getPlayer22()&&(a.player22=d.getPlayer22().Name,d.setCurrent(null)),d.getPlayer11()&&d.getPlayer12()&&d.getPlayer21()&&d.getPlayer22()&&(console.log("dude in the draws"),$("#startGame").show()),e.on("goal1",function(a){$("#team1").text(a)}),e.on("goal2",function(a){$("#team2").text(a)}),a.clickplayer=function(a){d.setCurrent(a),b.path("/users")}}]),app.controller("UserController",["$scope","$location","SocketService","PlayersService","$http",function(a,b,c,d){function e(b){a.arr=b,a.$digest()}var f={"Content-Type":"application/json",dataType:"json",Accept:"application/json",Authorization:"Basic RlVTOlNhbGFzYW5hMTIzNA=="};$.ajax({url:"http://apprekdbs01.ad.acme.is:8000/Fussball_Project/tempUser.xsjs",type:"GET",dataType:"json",headers:f,contentType:"application/json; charset=utf-8",success:function(a){e(a)}}),a.thisPlayer=function(a){console.log("This is his user id : "+a.UserId),11==d.getCurrent()?d.setPlayer11(a):12==d.getCurrent()?d.setPlayer12(a):21==d.getCurrent()?d.setPlayer21(a):22==d.getCurrent()&&d.setPlayer22(a),b.path("/")},a.doStuff=function(){var a={team1user1:4,team1user2:5,team2user1:6,team2user2:7};$.ajax({url:"http://apprekdbs01.ad.acme.is:8000/Fussball_Project/tempGame.xsjs",type:"POST",data:JSON.stringify(a),dataType:"json",headers:f,contentType:"application/json; charset=utf-8",success:function(a){console.log(a),a=JSON.parse(a);var b={gameOn:a.gameOn,gameId:a.gameId};$.ajax({url:"http://10.42.104.61:3000/start",type:"POST",data:b,success:function(a){console.log(a)}})}})}}]);